<html>
    <% order = Order.all.find_by(id: @id) %>
    <% user = User.all.find_by(id: order.user_id) %>
    <body class="Invoice-body">
        <p>
        <%= link_to image_tag("return.png", class:"Return-icon"), orders_path %>
        </p>
        <h1 class="InvoiceTitle">Invoice No: <%= @id %> </h1>

       <main class="Invoice-main">

            <div class="Invoice-div">
                <p>User ID: <%= user.role == "clerk" ? "Walk-In Customer" : order.user_id%></p>
                <p>Order ID: <%= @id%></p>
            </div>
            <div class="Invoice-div">
                <p>User Name: <%= user.first_name %></p>
                <p>Order Date: <%= order.date%></p>
                <% if order.delivered_at == nil%>

                <% else %>
                    <p>Delivered On:<%= order.delivered_at.to_s(:short) %></p>
                <% end %>
            </div>
            <hr>
            <div class="Invoice-div-title">
                <p>Item Name</p>|
                <p>Quantity</p>|
                <p>Item Price</p>          
            </div>
            <hr>
            <% @order_items.all.each do |order_item| %>
                <section class="Invoice-section">
                    <p class="Invoice-sectionName"><%= order_item.menu_item_name %></p>
                    <p class="Invoice-quantity"><%= order_item.quantity %></p>
                    <p class="Invoice-sectionPrice">₹ <%= order_item.menu_item_price.to_i %></p>
                </section>
            <% end %>
            <hr>
            <p class="Invoice-total">Total: ₹ <%= order.total_price.to_f%></p>
        </main>

    </body>
</html>